Конспект с задачами на КР

Содержание:
1. [Динамическое программирование. Задача о распределении инвестиций между проектами.](#title-1)
2. Решение рекуррентных соотношений:
   - [Вычисление ленточного определителя](#title-2);
   - [Вычисление количества маршрутов в графе из трех вершин](#title-3).
3. Оптимальное расписание:
   - [Ленточная стратегия](#title-4);
   - [Конвейерная задача](#title-5);
   - [Уровневая стратегия](#title-6);
   - [Лексикографическая стратегия](#title-76);
   - [Стратегия разделения процессоров](#title-8).
---
## <a id="title-1">Динамическое программирование. Задача о распределении инвестиций между проектами.</a>
Рассмотрим задачу об оптимальном распределении инвестиций. Пусть имеется 4 инвестиционных проекта А. В. С, D и фиксированная сумма денег (500 тыс. руб.), которую надо вложить в эти проекты так, чтобы максимизировать полученную прибыль. 

Исходные данные для задачи указаны в таблице:

| Вложения    | Прибыль A   | Прибыль B   | Прибыль C   | Прибыль D   |
|:------------|:-----------:|:-----------:|:-----------:|:-----------:|
| (тыс. руб.) | (тыс. руб.) | (тыс. руб.) | (тыс. руб.) | (тыс. руб.) |
| 100         | 15          | 18          | 16          | 17          | 
| 200         | 20          | 22          | 23          | 19          |
| 300         | 26          | 28          | 27          | 25          |
| 400         | 34          | 33          | 29          | 31          |
| 500         | 40          | 39          | 41          | 37          |

Требуется найти такой вариант распределения всей суммы (500 тыс. руб. ) между проектами А, В, С, D, чтобы полученная прибыль была максимально возможной. 

Особенность задачи в том, что объём вложений в любой из проектов должен быть кратен 100 тыс. руб. **т.е. сумма в 100 тыс. руб. является неделимой**.

---

Для начала «научимся» оптимально вкладывать разные суммы в два проекта А и В.

Вложения / Максимальная прибыль от А и В
> Варианты распределения 100 тыс.руб.:
>* 100A = 15
>* 100B = 18 - *Максимальная прибыль от вложения 100 тыс.руб.* 

> Варианты распределения 200 тыс.руб.:
>* 200A = 20
>* 100A + 100B = 15 + 18 = 33 - *Максимальная прибыль от вложения 200 тыс.руб.* 
>* 200B = 22

> Варианты распределения 300 тыс.руб.:
>* 300A = 26
>* 200A + 100B = 20 + 18 = 38 - *Максимальная прибыль от вложения 300 тыс.руб.* 
>* 100A + 200B = 15 + 22 = 37
>* 300B = 28

> Варианты распределения 400 тыс.руб.:
>* 400A = 34
>* 300A + 100B = 26 + 18 = 44 - *Максимальная прибыль от вложения 400 тыс.руб.* 
>* 200A + 200B = 20 + 22 = 42
>* 100A + 300B = 15 + 28 = 43
>* 400B = 33

> Варианты распределения 500 тыс.руб.:
>* 500A = 40
>* 400A + 100B = 34 + 18 = 52 - *Максимальная прибыль от вложения 500 тыс.руб.* 
>* 300A + 200B = 26 + 22 = 48
>* 200A + 300B = 20 + 28 = 48
>* 100A + 400B = 15 + 33 = 48
>* 500B = 39

---

| Вложения    | Прибыль **AB** | Прибыль C  |
|:------------|:--------------:|:----------:|
| (тыс. руб.) | (тыс. руб.)    | (тыс. руб.)|
| 100         | 18             | 16         |
| 200         | 33             | 23         |
| 300         | 38             | 27         |
| 400         | 44             | 29         |
| 500         | 52             | 41         |

Опираясь на эту таблицу, мы теперь можем узнать, как оптимально распределять разные объёмы инвестиций между тремя проектами А, В и С.

Вложения / Максимальная прибыль от А, В и С
> Варианты распределения 100 тыс.руб.:
>* 100AB = 18 - *Максимальная прибыль от вложения 100 тыс.руб.* 
>* 100C = 16

> Варианты распределения 200 тыс.руб.:
>* 200.AB = 33
>* 100AB + 100C = 18 + 16 = 34  - *Максимальная прибыль от вложения 200 тыс.руб.* 
>* 200C = 23

> Варианты распределения 300 тыс.руб.:
>* 300AB = 38
>* 200AB + 100C = 33 + 16 = 49 - *Максимальная прибыль от вложения 300 тыс.руб.* 
>* 100AB + 200C = 18 + 23 = 41
>* 300C = 27

> Варианты распределения 400 тыс.руб.:
>* 400AB = 44
>* 300AB + 100C = 38 + 16 = 54
>* 200AB + 200C = 33 + 23 = 56 - *Максимальная прибыль от вложения 400 тыс.руб.* 
>* 100AB + 300C = 18 + 27 = 45
>* 400C = 29

> Варианты распределения 500 тыс.руб.:
>* 500AB = 52
>* 400AB + 100C = 44 + 16 = 60
>* 300AB + 200C = 38 + 23 = 61 - *Максимальная прибыль от вложения 500 тыс.руб.* 
>* 200AB + 300C = 33 + 27 = 60
>* 100AB + 400C = 18 + 29 = 48
>* 500C = 41

---

| Вложения    | Прибыль **ABС** | Прибыль D   |
|:------------|:---------------:|:-----------:|
| (тыс. руб.) | (тыс. руб.)     | (тыс. руб.) |
| 100         | 18              | 17          |
| 200         | 34              | 19          |
| 300         | 49              | 25          |
| 400         | 56              | 31          |
| 500         | 61              | 27          |


Наконец, зная, как оптимально распределять инвестиции между проектами А, В и С, мы можем составить таблицу, где будет отражено оптимальное распределение инвестиций между всеми четырьмя проектами А, В, С, D.

Вложения / Максимальная прибыль от А, В, С и D
> Варианты распределения 100 тыс.руб.:
>* 100ABC = 18 - *Максимальная прибыль от вложения 100 тыс.руб.* 
>* 100D = 17

> Варианты распределения 200 тыс.руб.:
>* 200ABC = 34
>* 100ABC + 100D = 18 + 17 = 35 - *Максимальная прибыль от вложения 200 тыс.руб.* 
>* 200D = 19

> Варианты распределения 300 тыс.руб.:
>* 300ABC = 49
>* 200ABC + 100D = 34 + 17 = 51 - *Максимальная прибыль от вложения 300 тыс.руб.* 
>* 100ABC + 200D = 18 + 19 = 37
>* 300D = 25

> Варианты распределения 400 тыс.руб.:
>* 400ABC = 56
>* 300ABC + 100D = 49 + 17 = 66 - *Максимальная прибыль от вложения 400 тыс.руб.* 
>* 200ABC + 200D = 34 + 19 = 53
>* 100ABC + 300D = 18 + 25 = 43
>* 400D = 31

> Варианты распределения 500 тыс.руб.:
>* 500ABC = 61
>* 400ABC + 100D = 56 + 17 = 73 - *Максимальная прибыль от вложения 500 тыс.руб.* 
>* 300ABC + 200D = 49 + 19 = 68
>* 200ABC + 300D = 34 + 25 = 59
>* 100ABC + 400D = 18 + 31 = 49
>* 500D = 37

---

| Вложения    | Прибыль **ABСD** |
|:------------|:----------------:|
| (тыс. руб.) | (тыс. руб.)      |
| 100         | 18               |
| 200         | 35               |
| 300         | 51               |
| 400         | 66               |
| 500         | 73               |

Из нижней части таблицы видим, что максимальная прибыль составляет 73 тыс. руб.
Она достигается, если распределить исходную сумму следующим образом:
- в проект D вложить 100 тыс. руб.,
- в проект С вложить 200 тыс. руб.,
- в проект В вложить 100 тыс. руб.,
- в проект A вложить 100 тыс. руб.
---
## Решение рекуррентных соотношений. Вычисление ленточного определителя.
Требуется вычислить определитель $n$-го порядка

$$
x_n =     
 \begin{vmatrix}    
  6 & 9 & 0 & 0 & \cdots & 0 & 0 & 0 \\    
  1 & 6 & 9 & 0 & \cdots & 0 & 0 & 0 \\    
  0 & 1 & 6 & 9 & \cdots & 0 & 0 & 0 \\    
  0 & 0 & 1 & 6 & \cdots & 0 & 0 & 0 \\    
  \vdots  & \vdots & \vdots& \vdots & \ddots & \vdots & \vdots & \vdots \\    
  0 & 0 & 0 & 0 & \cdots & 6 & 9 & 0 \\    
  0 & 0 & 0 & 0 & \cdots & 1 & 6 & 9 \\    
  0 & 0 & 0 & 0 & \cdots & 0 & 1 & 6 \\     
 \end{vmatrix}
$$


### Решение

Обозначим искомый определитель через $х_n$. Тогда, вычисляя его разложением по первой строке, а затем возникший определитель $(n - 1)$-го порядка разложением по первому столбцу, приходим к равенству

$$
x_n =     
 \begin{vmatrix}    
  6 & 9 & 0 & 0 & \cdots & 0 & 0 & 0 \\    
  1 & 6 & 9 & 0 & \cdots & 0 & 0 & 0 \\    
  0 & 1 & 6 & 9 & \cdots & 0 & 0 & 0 \\    
  0 & 0 & 1 & 6 & \cdots & 0 & 0 & 0 \\    
  \vdots  & \vdots & \vdots& \vdots & \ddots & \vdots & \vdots & \vdots \\    
  0 & 0 & 0 & 0 & \cdots & 6 & 9 & 0 \\    
  0 & 0 & 0 & 0 & \cdots & 1 & 6 & 9 \\    
  0 & 0 & 0 & 0 & \cdots & 0 & 1 & 6 \\     
 \end{vmatrix} =
 6 \cdot  
 \begin{vmatrix}    
  6 & 9 & 0 & \cdots & 0 & 0 & 0 \\    
  1 & 6 & 9 & \cdots & 0 & 0 & 0 \\    
  0 & 1 & 6 & \cdots & 0 & 0 & 0 \\    
  \vdots & \vdots& \vdots & \ddots & \vdots & \vdots & \vdots \\    
  0 & 0 & 0 & \cdots & 6 & 9 & 0 \\    
  0 & 0 & 0 & \cdots & 1 & 6 & 9 \\    
  0 & 0 & 0 & \cdots & 0 & 1 & 6 \\     
 \end{vmatrix} -9 \cdot  
 \begin{vmatrix}
  1 & 9 & 0 & \cdots & 0 & 0 & 0 \\    
  0 & 6 & 9 & \cdots & 0 & 0 & 0 \\    
  0 & 1 & 6 & \cdots & 0 & 0 & 0 \\    
  \vdots & \vdots& \vdots & \ddots & \vdots & \vdots & \vdots \\    
  0 & 0 & 0 & \cdots & 6 & 9 & 0 \\    
  0 & 0 & 0 & \cdots & 1 & 6 & 9 \\    
  0 & 0 & 0 & \cdots & 0 & 1 & 6 \\     
 \end{vmatrix} = 6 \cdot x_{n-1} - 9 \cdot 1 \cdot
 \begin{vmatrix}
  6 & 9 & \cdots & 0 & 0 & 0 \\    
  1 & 6 & \cdots & 0 & 0 & 0 \\    
  \vdots& \vdots & \ddots & \vdots & \vdots & \vdots \\    
  0 & 0 & \cdots & 6 & 9 & 0 \\    
  0 & 0 & \cdots & 1 & 6 & 9 \\    
  0 & 0 & \cdots & 0 & 1 & 6 \\     
 \end{vmatrix} =  6 \cdot x_{n-1} - 9 \cdot x_{n-2}
$$

$$
x_n = 6 \cdot x_{n-1} - 9 \cdot x_{n-2}
$$

---

Таким образом мы получили линейное однородное рекуррентное соотношение с постоянными коэффициентами глубины 2. Чтобы его решить, надо добавить два начальных условия:

$$
\begin{align}
& x_1 = 6, \\
& x_2 = 
\begin{vmatrix}
6 & 9 \\
1 & 6
\end{vmatrix}
= 6 \cdot 6 - 9 \cdot 1 = 27
\end{align}
$$

Применим описанный выше метод решения рекуррентных соотношений:

#### 1. Составим и решим характеристическое уравнение

Оно в данном случае будет иметь вид:

$$
\lambda^n= 6 \cdot \lambda^{n-1} - 9 \cdot \lambda^{n-2}
$$

или после упрощения

$$
\lambda^2 - 6 \cdot \lambda + 9 = 0
$$

---

Его корни $\lambda_1= 3, \lambda_2= 3$, т.е. характеристическое уравнение имеет один корень, равный 3, кратности 2. Далее, согласно пункту 3, ответ к рекуррентному соотношению запишем в виде формулы общего решения

$$
x_n = P_1(n) \cdot 3^n
$$

где $P_1(n)$ - полином от $n$ степени 1, т.е. выражение вида $а \cdot n + b$. Константы $а$ и $b$ найдём из начальных условий $х_1 = 6, х_2 = 27$. Подставляя вместо $n$ числа 1 и 2 в формулу общего решения

$$
x_n = (а \cdot n + b) \cdot 3^n
$$

получим систему уравнений для нахождения $а$ и $b$:

$$
\begin{cases}
6 = (a + b) \cdot 3, \\
27 = (2a + b) \cdot 9
\end{cases}
$$

---

Эта система имеет единственное решение $а=b=1$. В итоге получаем окончательный ответ, т.е. формулу частного решения

$$
x_n = (n + 1) \cdot 3^n
$$

Сделаем проверку, вычислив $х_3$ по нашей формуле и исходя из постановки задачи. Согласно полученной формуле $x_3 = 4 \cdot 3^3 = 108$. Исходя из постановки задачи, получаем такой же результат

$$
x_3 = 
\begin{vmatrix}
6 & 9 & 0 \\
1 & 6 & 9 \\
0 & 1 & 6
\end{vmatrix} = 6 \cdot 
\begin{vmatrix}
6 & 9 \\
1 & 6 
\end{vmatrix} - 9 \cdot 
\begin{vmatrix}
1 & 9 \\
0 & 6 
\end{vmatrix} = 6 \cdot (36-9) - 9 \cdot 6 = 162-54=108
$$

В рассмотренном примере корни характеристического уравнения оказались совпадающими, т.е. был один корень, равный 3, кратности 2. Если бы корни были разные, например, 3 и (-3), то формула общего решения была бы такая

$$
x_n= a \cdot 3^n + b \cdot (-3)^n,
$$

где коэффициенты $а$ и $b$ далее нужно было бы вычислить, исходя из начальных условий $х_1 = 6, x_2 = 27$.

---
## Вычисление количества маршрутов в графе из трех вершин.
Пусть некий путешественник перемещается между тремя городами А, В, С по трём дорогам.

Каждый день он переходит из одного города в какой-то соседний город. Спрашивается, сколько различных замкнутых маршрутов, **начинающихся и заканчивающихся в городе А**, может проделать путешественник за $n$ дней?

При малых $n$ это количество можно найти перебором:

| n | Маршруты | Количество |
|:---:|:---:|:---:|
|  1  | -   |  0  |
|  2  |$(A \longrightarrow B \longrightarrow A), (A \longrightarrow C \longrightarrow A)$ |  2  |
|  3  |$(A \longrightarrow B \longrightarrow C \longrightarrow A), (A \longrightarrow C \longrightarrow B \longrightarrow A)$ |  2  |
|  4  |$(A \longrightarrow B \longrightarrow A \longrightarrow B \longrightarrow A), (A \longrightarrow C \longrightarrow A \longrightarrow C \longrightarrow A),\\ (A \longrightarrow B \longrightarrow A \longrightarrow C \longrightarrow A), (A \longrightarrow C \longrightarrow A \longrightarrow B \longrightarrow A),\\ (A \longrightarrow B \longrightarrow C \longrightarrow B \longrightarrow A), (A \longrightarrow C \longrightarrow B \longrightarrow C \longrightarrow A)$ |  6  |

---

Введём обозначения:
- $a_n$ - количество различных маршрутов, начинающихся и заканчивающихся в городе А и состоящих из $n$ дорог;
- $b_n$ - количество различных маршрутов, начинающихся в А, а заканчивающихся в В и состоящих из $n$ дорог;
- $c_n$ - количество различных маршрутов, начинающихся в А, а заканчивающихся в С и состоящих из и $n$ дорог.

Можно проверить, что

$$
a_1 = 0, b_1 = 1, c_1 = 1,
$$

$$
a_2 = 2, b_2 = 1, c_2 = 1.
$$

Из комбинаторного принципа сложения можно получить систему равенств:

$$
\begin{cases}
a_n = b_{n-1} + c_{n-1} \\
b_n = a_{n-1} + c_{n-1} \\
c_n = a_{n-1} + b_{n-1}
\end{cases}
$$

Заметим, что с точки зрения программной реализации эта система представляет собой взаимную рекурсию трёх рекурсивных функций - $a(n), b(n), c(n)$. Нам нужно получить формулу для вычисления $а_n$ решив эту систему.

---

Очевидно, что в силу симметрии задачи: $b_{n-1} = c_{n-1}, b_n= c_n$. Тогда можно исключить из системы $c_n$ и получить систему из двух уравнений:

$$
\begin{cases}
a_n = 2b_{n-1} \\
b_n = a_{n-1} + b_{n-1}
\end{cases}
$$

Из первого уравнения следует, что $а_{n-1} = 2b_{n-2}$. Это позволяет исключить $а_{n-1}$ из второго уравнения. Тогда вместо системы мы получаем одно уравнение:

$$
b_n = 2b_{n-2} + b_{n-1}
$$

Это - *линейное однородное рекуррентное соотношение с постоянными коэффициентами и фиксированной глубиной 2*. Решим его, используя описанный выше алгоритм, через характеристическое уравнение и его корни.

---

Характеристическое уравнение в данном случае имеет вид:

$$
\lambda^n= 2 \cdot \lambda^{n-2} + \cdot \lambda^{n-1}
$$

или после упрощения

$$
\lambda^2 - \lambda - 2 = 0
$$

Его корни $\lambda_1 = 2, \lambda_2 = -1$. Тогда ответ к рекуррентному соотношению запишем в виде **формулы общего решения**:

$$
b_n = C_1 \cdot 2^n + C_2 \cdot (-1)^n
$$

где константы $C_1$ и $C_2$ найдём исходя из начальных условий $b1 = 1, b2 = 1$.

Подставляя вместо $n$ числа 1 и 2 в *формулу общего решения*, получим систему уравнений для нахождения констант $С_1$ и $C_2$:

$$
\begin{cases}
1 = 2 \cdot C_1 - C_2, \\
1 = 4 \cdot C_1 + C_2
\end{cases}
$$

---

Эта система имеет единственное решение $С_1 = \frac{1}{3}, С_2 = -\frac{1}{3}$. В итоге получаем формулу для вычисления $b_n$:

$$
b_n = \frac{1}{3} \cdot 2^n - \frac{1}{3} \cdot(-1)^n
$$

Используя связь $а_n = 2b_{n-1}$, получаем окончательный ответ для вычисления искомого количества $а$:

$$
a_n = \frac{2}{3} \cdot 2^{n-1} - \frac{2}{3} \cdot (-1)^{n-1} = \frac{1}{3} \cdot 2^n + \frac{2}{3} \cdot (-1)^n
$$

Сделаем проверку, вычислив $а_1, а_2, а_3$ по нашей формуле и исходя из постановки задачи. Согласно полученной формуле:

$$
a_1 = \frac{2}{3} - \frac{2}{3} = 0, \\
a_2 = \frac{4}{3} + \frac{2}{3} = 2, \\
a_3 = \frac{8}{3} - \frac{2}{3} = 2.
$$

Исходя из постановки задачи, получаем такой же результат.

---

На самом деле, мы узнали даже больше, чем требовалось. Мы нашли не только $a_n$ - количество замкнутых маршрутов длины $n$, начинающихся и заканчивающихся в городе А, но также и $b_n$ и $c_n$ - число маршрутов длины $n$, начинающихся в А, а заканчивающихся в В и С соответственно:

$$
b_n = \frac{1}{3} \cdot 2^n - \frac{1}{3} \cdot (-1)^n \\
c_n = \frac{1}{3} \cdot 2^n - \frac{1}{3} \cdot (-1)^n
$$

Суммарное число маршрутов длины $n$, начинающихся в А, равно $a_n + b_n + c_n = 2^n$. Тогда доля искомых маршрутов $a_n$ от суммарного числа маршрутов длины $n$, начинающихся в А, составляет

$$
\frac{a_n}{2^n} = \frac{\frac{1}{3} \cdot 2^n + \frac{2}{3} \cdot (-1)^n}{2^n} = \frac{1}{3} + \frac{2}{3} \cdot \frac{(-1)^n}{2^n}
$$

Заметим, что величина $\frac{a_n}{2^n}$ - это вероятность того, что через $n$ дней путешественник вновь окажется в городе А. При увеличении $n$ эта доля стремится к $\frac{1}{3}$, т.к.

$$
\lim_{n \to \infty}(\frac{1}{3} + \frac{2}{3} \cdot \frac{(-1)^n}{2^n}) = \frac{1}{3}
$$

При $n \to \infty$ доли $b_n$ и $c_n$ также стремятся к 1/3. Это означает, что по прошествии многих дней (в «далёком будущем») мы с равной вероятностью можем увидеть нашего путешественника в любом из городов А, В или С, хотя начинал он свой путь в городе А. Интуитивно это понятно, т.к. при длительном путешествии память о начале пути постепенно «стирается».

---
## Ленточная стратегия

---
## Конвейерная задача
---
## Уровневая стратегия
---
## Лексикографическая стратегия
---
## Стратегия разделения процессоров
